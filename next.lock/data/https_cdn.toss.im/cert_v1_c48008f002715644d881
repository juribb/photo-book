var TossCert=function(){"use strict";function e(){return("undefined"!=typeof window||"undefined"==typeof global)&&(null!==window.navigator.userAgent.match(/ipad|iphone/i)?"ios":null!==window.navigator.userAgent.match(/Android/i)?"android":"web")}var o="android"===e()?document.location:window.location,t=function(){var e=void 0;function t(e,o,t){var n=e,i=null==t?void 0:t.targetWindow,r=JSON.stringify(o),a=document.createElement("form");a.setAttribute("method","post"),a.setAttribute("action",n),null!=i&&a.setAttribute("target",i.name);var d=document.createElement("input");d.type="hidden",d.name="stringifiedData",d.value=r,a.appendChild(d),document.body.appendChild(a),null!=i&&(i.window.location.href=e),a.submit(),document.body.removeChild(a)}return{preparePopup:function(){var o=/*@cc_on!@*/Boolean(document.documentMode)?"/loading":void 0;null!=e&&e.close(),e=window.open(o,"토스로 인증하기","top=10, left=10, width=540, height=680, status=no, menubar=no, toolbar=no, resizable=no")},start:function(n){if("redirect"===n.type)!function(e){var n=e.authUrl,i=e.forceOneTouch,r=e.successUrl,a=e.failUrl,d=e.txId;t(n+"&domain=".concat(o.origin,"&forceOneTouch=").concat(Boolean(i)),{type:"redirect",txId:d,successUrl:r,failUrl:a})}(n);else!function(n){var i=n.authUrl,r=n.txId,a=n.onSuccess,d=n.onFail,c=n.forceOneTouch,u=i+"&domain=".concat(o.origin,"&forceOneTouch=").concat(Boolean(c));null!=e?(t(u,{type:"popup",txId:r},{targetWindow:{window:e,name:"토스로 인증하기"}}),function(e,o){var t=function(n){var i=function(){window.removeEventListener("message",t)};switch(n.data.type){case"TOSS_AUTH_SUCCESS":void 0!==e?e():console.error("TossCert.start에 onSuccess를 정의해주세요"),i();break;case"TOSS_AUTH_FAIL":void 0!==o&&o(n.data.error),i()}};window.addEventListener("message",t,!1)}(a,d)):console.error("TossCert.preparePopup()를 먼저 호출해 빈 팝업을 열어주세요.")}(n);var i,r=n.authUrl,a=n.txId;i={authUrl:r,txId:a},void 0!==window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify(i))}}};return window.TossCert=t,t}();
